<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inyecciones y Ataques XSS - Proyecto de Ciberseguridad</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <img src="css/Universidad-Santo-Tomas (1).png" alt="Logo Universidad Santo Tomás">
                    <div>
                        <h1 class="site-title">Ciberseguridad</h1>
                        <p class="site-subtitle">Universidad Santo Tomás</p>
                    </div>
                </div>
                <div class="student-info">
                    <p><strong>Estudiantes:</strong> Cristóbal Sáez Badilla y Damian Jinel Cortes</p>
                    <p><strong>Correos:</strong> <a href="mailto:c.saez41@alumnossantotomas.cl">c.saez41@alumnossantotomas.cl</a> / <a href="mailto:d.jinel@alumnossantotomas.cl">d.jinel@alumnossantotomas.cl</a></p>
                    <p><strong>Profesor:</strong> Marco Vega</p>
                </div>
            </div>
        </div>
    </header>

    <nav>
        <div class="container">
            <ul>
                <li><a href="index.html">Portada</a></li>
                <li><a href="fase1.html">Fase 1: Reconocimiento</a></li>
                <li><a href="fase2.html">Fase 2: Scanning</a></li>
                <li><a href="fase3.html">Fase 3: Acceso</a></li>
                <li><a href="fase4.html">Fase 4: Mantenimiento de Acceso</a></li>
                <li><a href="fase5.html">Fase 5: Borrado de Huellas</a></li>
                <li><a href="inyecciones.html">Inyecciones y Ataques XSS</a></li>
            </ul>
        </div>
    </nav>

    <main>
        <div class="container">
            <div class="content">
                <h1>Inyecciones y Ataques XSS</h1>
                <p>Esta sección demuestra ejemplos de formularios vulnerables a inyecciones SQL y ataques XSS, así como sus contrapartes seguras.</p>

                <!-- Mostrar mensajes de éxito/error -->
                <?php
                    if (isset($_GET['mensaje'])) {
                        echo "<p class='message'>" . htmlspecialchars($_GET['mensaje']) . "</p>";
                    }
                ?>

                <section>
                    <h2>Inyección SQL</h2>
                    <div class="form-container">
                        <div class="form-wrapper">
                            <h3>Formulario Vulnerable</h3>
                            <form id="sql-vulnerable-form" action="procesar_sql_vulnerable.php" method="POST">
                                <label for="sql-vulnerable-username">Usuario:</label>
                                <input type="text" id="sql-vulnerable-username" name="sql-vulnerable-username" required>
                                <label for="sql-vulnerable-password">Contraseña:</label>
                                <input type="password" id="sql-vulnerable-password" name="sql-vulnerable-password" required>
                                <button type="submit">Enviar (Vulnerable)</button>
                            </form>
                        </div>
                        <div class="form-wrapper">
                            <h3>Formulario Seguro</h3>
                            <form id="sql-secure-form" action="procesar_sql_seguro.php" method="POST">
                                <label for="sql-secure-username">Usuario:</label>
                                <input type="text" id="sql-secure-username" name="sql-secure-username" required>
                                <label for="sql-secure-password">Contraseña:</label>
                                <input type="password" id="sql-secure-password" name="sql-secure-password" required>
                                <button type="submit">Enviar (Seguro)</button>
                            </form>
                        </div>
                    </div>
                </section>

                <section>
                    <h2>Ataque XSS</h2>
                    <div class="form-container">
                        <div class="form-wrapper">
                            <h3>Formulario Vulnerable</h3>
                            <form id="xss-vulnerable-form" action="procesar_xss_vulnerable.php" method="POST">
                                <label for="xss-vulnerable-input">Texto:</label>
                                <textarea id="xss-vulnerable-input" name="xss-vulnerable-input" required></textarea>
                                <button type="submit">Enviar (Vulnerable)</button>
                            </form>
                        </div>
                        <div class="form-wrapper">
                            <h3>Formulario Seguro</h3>
                            <form id="xss-secure-form" action="procesar_xss_seguro.php" method="POST">
                                <label for="xss-secure-input">Texto:</label>
                                <textarea id="xss-secure-input" name="xss-secure-input" required></textarea>
                                <button type="submit">Enviar (Seguro)</button>
                            </form>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2024 Universidad Santo Tomás. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script>
        // Validación básica para el formulario de inyección SQL
        document.getElementById('sql-secure-form').addEventListener('submit', function(e) {
            e.preventDefault();
            var username = document.getElementById('sql-secure-username').value;
            var password = document.getElementById('sql-secure-password').value;
            if (username.includes("'") || username.includes('"') || username.includes(';') ||
                password.includes("'") || password.includes('"') || password.includes(';')) {
                alert('Entrada potencialmente peligrosa detectada');
            } else {
                this.submit();
            }
        });

        // Validación básica para el formulario de ataque XSS
        document.getElementById('xss-secure-form').addEventListener('submit', function(e) {
            e.preventDefault();
            var input = document.getElementById('xss-secure-input').value;
            if (input.includes('<script>') || input.includes('javascript:')) {
                alert('Entrada potencialmente peligrosa detectada');
            } else {
                this.submit();
            }
        });
    </script>
</body>
</html>
